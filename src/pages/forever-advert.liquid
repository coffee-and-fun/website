<!DOCTYPE html>
<html class="brand-color-background scroll-smooth antialiased" lang="en" data-theme="light">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <!-- Primary Meta Tags -->
    <title>Mystery Rank - Compete and Climb the Leaderboard | Coffee & Fun</title>
    <meta name="title" content="Mystery Rank - Compete and Climb the Leaderboard | Coffee & Fun" />
    <meta name="description" content="Join Mystery Rank to secure your spot and climb the ranks. The more you contribute, the higher you rank—but you'll never know what others paid. Embrace the excitement of mystery and competition!" />
    <meta name="keywords" content="mystery rank, leaderboard, competition, ranking system, gamification, Coffee and Fun" />
    <meta name="author" content="Coffee & Fun LLC" />
    <meta name="publisher" content="Coffee & Fun LLC" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="rating" content="general" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/forever-advert/" />
    <meta property="og:title" content="Mystery Rank - Compete and Climb the Leaderboard" />
    <meta property="og:description" content="Secure your spot and climb the ranks. The twist? You'll never know what others contributed. Join the mystery competition!" />
    <meta property="og:image" content="/assets/images/social/pages/forever-advert.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Mystery Rank leaderboard competition" />
    <meta property="og:site_name" content="Coffee & Fun" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="/forever-advert/" />
    <meta name="twitter:title" content="Mystery Rank - Compete and Climb the Leaderboard" />
    <meta name="twitter:description" content="Secure your spot and climb the ranks. The twist? You'll never know what others contributed." />
    <meta name="twitter:image" content="/assets/images/social/pages/forever-advert.png" />
    <meta name="twitter:image:alt" content="Mystery Rank leaderboard" />
    <meta name="twitter:site" content="@bycoffeeandfun" />
    <meta name="twitter:creator" content="@bycoffeeandfun" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="/forever-advert/" />
    
    <!-- Favicon & Icons -->
    <link rel="icon" href="/assets/images/favicon.png" type="image/png" />
    <link rel="apple-touch-icon" href="/assets/images/social/192.png" />
    <link rel="icon" href="/assets/images/social/192.png" sizes="192x192" type="image/png" />
    
    <!-- PWA & Mobile -->
    <link rel="manifest" href="/assets/images/social/site.webmanifest" />
    <meta name="theme-color" content="#000000" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Mystery Rank" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Mystery Rank",
        "description": "A competitive ranking system where contributors climb the leaderboard without knowing others' contributions",
        "url": "/forever-advert/",
        "applicationCategory": "GameApplication",
        "operatingSystem": "Any",
        "creator": {
            "@type": "Organization",
            "name": "Coffee & Fun LLC",
            "url": "https://www.coffeeandfun.com",
            "sameAs": ["https://x.com/bycoffeeandfun"]
        },
        "offers": {
            "@type": "Offer",
            "price": "Variable",
            "priceCurrency": "USD",
            "availability": "https://schema.org/InStock"
        }
    }
    </script>
    
    {% bundledCss %}
    {% include scripts.html %}
    
    <!-- External Scripts -->
    <script src="https://unpkg.com/vue@3"></script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then((registrations) => {
                registrations.forEach(registration => {
                    registration.unregister();
                });
                
                navigator.serviceWorker.register('/service-worker.js')
                    .then(() => console.log('✅ Service worker registered'))
                    .catch((err) => console.error('Service worker error:', err));
            });
        }
    </script>
    
    <style>
        /* Auto-scroll animation */
        @keyframes autoScroll {
            0% { transform: translateY(0); }
            100% { transform: translateY(-100%); }
        }
        
        /* Smooth scrolling */
        .scroll-container {
            scroll-behavior: smooth;
        }
        
        /* Enhanced link styles */
        .rank-link {
            display: inline-block;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
        }
        
        .rank-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px) scale(1.05);
            color: #fbbf24;
        }
        
        /* Medal animations */
        .medal {
            display: inline-block;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        /* Category card styles */
        .category-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 1rem;
            padding: 2rem;
            transition: all 0.3s ease;
        }
        
        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            border-color: rgba(255,255,255,0.2);
        }
        
        /* Button enhancement */
        .btn-glow {
            position: relative;
            overflow: hidden;
        }
        
        .btn-glow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn-glow:hover::before {
            width: 300px;
            height: 300px;
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* Empty state styles */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
            text-align: center;
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
    </style>
</head>

<body style="background-color: black;">
    {% assign showDonation = false %}
    {% assign showCreditsBuyButton = true %}
    {% assign showMysteryApp = true %}
    {% assign showKeyboardModal = false %}
    {% include header.liquid %}
    
    <main id="app" class="mx-auto max-w-5xl mb-12 bg-black text-white overflow-hidden">
        <div class="flex flex-col min-h-screen">
            <!-- Header Section -->
            <div class="text-center py-12 px-8">
                <h1 class="text-5xl md:text-6xl font-bold mb-4 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                    Mystery Rank
                </h1>
                <p class="text-xl text-gray-300 max-w-2xl mx-auto">
                    Compete for the top spots. The twist? Rankings are based on contributions, but amounts remain a mystery.
                </p>
                <div class="mt-6 flex justify-center gap-4">
                    <button @click="toggleAutoScroll" class="btn btn-sm btn-outline btn-primary">
                        {% raw %}{{ isScrolling ? 'Pause' : 'Resume' }}{% endraw %} Auto-Scroll
                    </button>
                    <button @click="scrollToTop" class="btn btn-sm btn-outline">
                        Back to Top
                    </button>
                </div>
            </div>
            
            <!-- Scrollable Rankings Container -->
            <div class="flex-grow overflow-auto px-8 pb-8 scroll-container"
                 ref="scrollContainer"
                 @scroll="handleUserScroll"
                 @mouseenter="pauseScroll"
                 @mouseleave="resumeScroll">
                
                {% for category in credits.list %}
                <div class="category-card my-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-3 text-center text-yellow-400">
                        {{ category.title }}
                    </h2>
                    <h3 class="text-lg md:text-xl font-semibold mb-8 text-center text-gray-400">
                        {{ category.description }}
                    </h3>
                    
                    {% assign sorted_items = category.list | sort: 'rank' %}
                    
                    {% if sorted_items.size > 0 %}
                    <!-- Rankings Grid -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 text-center max-w-4xl mx-auto mb-8">
                        {% for item in sorted_items %}
                        <a href="{{ item.link }}"
                           title="Visit {{ item.text }}"
                           target="_blank"
                           rel="noopener noreferrer"
                           class="rank-link text-lg md:text-xl">
                            {% assign position = forloop.index0 %}
                            <span class="medal">
                                {% if position == 0 %}
                                    🥇
                                {% elsif position == 1 %}
                                    🥈
                                {% elsif position == 2 %}
                                    🥉
                                {% else %}
                                    🏆
                                {% endif %}
                            </span>
                            <span class="font-bold">#{{ position | plus: 1 }}</span>
                            <span class="ml-2">{{ item.text }}</span>
                        </a>
                        {% endfor %}
                    </div>
                    
                    <!-- CTA Button -->
                    <div class="text-center">
                        <a href="https://payments.coffeeandfun.com/b/14k4ifa6gbT62mQ9Bc"
                           target="_blank"
                           rel="noopener noreferrer"
                           title="Secure your spot in {{ category.title }}"
                           class="btn btn-secondary btn-glow">
                            Secure Your Spot
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5 ml-2" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </a>
                    </div>
                    {% else %}
                    <!-- Empty State -->
                    <div class="empty-state">
                        <div class="empty-state-icon">🎯</div>
                        <p class="text-xl text-gray-400 mb-6">Be the first to claim a spot in this category!</p>
                        <a href="https://payments.coffeeandfun.com/b/14k4ifa6gbT62mQ9Bc"
                           target="_blank"
                           rel="noopener noreferrer"
                           title="Be the first in {{ category.title }}"
                           class="btn btn-primary btn-lg btn-glow">
                            Claim #1 Spot
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-6 w-6 ml-2" fill="currentColor">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </a>
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
                
                <!-- Footer Info -->
                <div class="text-center py-12 border-t border-gray-800 mt-12">
                    <p class="text-gray-500 mb-4">How Mystery Rank Works:</p>
                    <div class="flex flex-wrap justify-center gap-6 text-sm text-gray-400">
                        <div class="flex items-center gap-2">
                            <span>💰</span>
                            <span>Higher contribution = Higher rank</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span>🎭</span>
                            <span>Amounts stay secret</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span>♾️</span>
                            <span>Rankings are permanent</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    {% include modals.liquid %}
    {% include footer.liquid %}
    
    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    scrollInterval: null,
                    isScrolling: true,
                    userScrolling: false,
                    scrollSpeed: 30, // Pixels per second
                    lastScrollTime: Date.now()
                };
            },
            
            mounted() {
                this.startScroll();
                this.addKeyboardShortcuts();
            },
            
            methods: {
                startScroll() {
                    const container = this.$refs.scrollContainer;
                    if (!container || this.scrollInterval) return;
                    
                    this.isScrolling = true;
                    this.scrollInterval = setInterval(() => {
                        if (!this.userScrolling && this.isScrolling) {
                            const maxScroll = container.scrollHeight - container.clientHeight;
                            
                            if (container.scrollTop >= maxScroll) {
                                // Loop back to top
                                container.scrollTop = 0;
                            } else {
                                // Smooth scroll down
                                container.scrollTop += 1;
                            }
                        }
                    }, 1000 / this.scrollSpeed);
                },
                
                pauseScroll() {
                    this.userScrolling = true;
                },
                
                resumeScroll() {
                    this.userScrolling = false;
                },
                
                stopScroll() {
                    if (this.scrollInterval) {
                        clearInterval(this.scrollInterval);
                        this.scrollInterval = null;
                    }
                    this.isScrolling = false;
                },
                
                toggleAutoScroll() {
                    if (this.isScrolling) {
                        this.stopScroll();
                    } else {
                        this.startScroll();
                    }
                },
                
                handleUserScroll() {
                    // Detect manual scrolling
                    const now = Date.now();
                    if (now - this.lastScrollTime < 100) {
                        this.userScrolling = true;
                        setTimeout(() => {
                            this.userScrolling = false;
                        }, 3000); // Resume after 3 seconds of inactivity
                    }
                    this.lastScrollTime = now;
                },
                
                scrollToTop() {
                    const container = this.$refs.scrollContainer;
                    if (container) {
                        container.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                },
                
                addKeyboardShortcuts() {
                    document.addEventListener('keydown', (e) => {
                        if (e.key === ' ' && e.target === document.body) {
                            e.preventDefault();
                            this.toggleAutoScroll();
                        } else if (e.key === 'Home') {
                            this.scrollToTop();
                        }
                    });
                }
            },
            
            beforeUnmount() {
                if (this.scrollInterval) {
                    clearInterval(this.scrollInterval);
                }
            }
        }).mount('#app');
    </script>
</body>
</html>