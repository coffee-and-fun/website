<!DOCTYPE html>
<html class="brand-color-background scroll-smooth antialiased" lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary Meta Tags -->
  <title>Coco's Trivia Corner - 53,000+ Quiz Questions | Coffee & Fun</title>
  <meta name="title" content="Coco's Trivia Corner - 53,000+ Quiz Questions | Coffee & Fun" />
  <meta name="description" content="Challenge yourself with over 53,000 unique trivia questions. Daily quizzes, competitive scoring, and fun for all ages. Test your knowledge and share your results!" />
  <meta name="keywords" content="trivia game, quiz questions, daily trivia, knowledge test, brain games, Coffee & Fun, Coco's Trivia" />
  <meta name="author" content="Coffee & Fun LLC" />
  <meta name="robots" content="index, follow" />
  <meta name="rating" content="safe for kids" />

  <link rel="canonical" href="/trivia/" />

  <link rel="icon" href="/assets/images/favicon.png" sizes="any" />
  <link rel="apple-touch-icon" href="/assets/images/social/192.png" />
  <link rel="icon" href="/assets/images/social/192.png" sizes="192x192" type="image/png" />

  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Coffee & Fun" />
  <meta property="og:title" content="Coco's Trivia Corner - 53,000+ Quiz Questions" />
  <meta property="og:description" content="Challenge yourself with over 53,000 unique trivia questions. Daily quizzes, competitive scoring, and fun for all ages!" />
  <meta property="og:url" content="/trivia" />
  <meta property="og:image" content="/assets/images/social/pages/trivia.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Coco's Trivia Corner - Daily Quiz Challenge" />
  <meta property="og:locale" content="en_US" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@bycoffeeandfun" />
  <meta name="twitter:creator" content="@bycoffeeandfun" />
  <meta name="twitter:title" content="Coco's Trivia Corner - 53,000+ Quiz Questions" />
  <meta name="twitter:description" content="Challenge yourself with over 53,000 unique trivia questions. Daily quizzes, competitive scoring, and fun for all ages!" />
  <meta name="twitter:image" content="/assets/images/social/pages/trivia.png" />
  <meta name="twitter:image:alt" content="Coco's Trivia Corner - Daily Quiz Challenge" />
  <meta name="twitter:domain" content="coffeeandfun.com" />
  <meta name="twitter:url" content="/trivia" />

  <link rel="manifest" href="/assets/images/social/site.webmanifest" />
  <meta name="theme-color" content="#fef5ec" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Coco's Trivia" />

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "name": "Coffee & Fun",
        "url": "https://www.coffeeandfun.com",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://www.coffeeandfun.com/search?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "Game",
        "@id": "https://www.coffeeandfun.com/trivia/",
        "name": "Coco's Trivia Corner",
        "description": "Challenge yourself with over 53,000 unique trivia questions. Daily quizzes with competitive scoring.",
        "url": "https://www.coffeeandfun.com/trivia/",
        "image": "https://www.coffeeandfun.com/assets/images/social/pages/trivia.png",
        "genre": ["Trivia", "Quiz", "Educational"],
        "numberOfPlayers": { "@type": "QuantitativeValue", "minValue": 1, "maxValue": 1 },
        "playMode": "SinglePlayer",
        "gamePlatform": ["Web Browser", "Mobile Browser"],
        "applicationCategory": "Game",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "creator": { "@type": "Organization", "name": "Coffee & Fun LLC", "url": "https://www.coffeeandfun.com" }
      }
    ]
  }
  </script>

  {% bundledCss %}

  <style>
    [v-cloak] { display: none; }

    @keyframes ticker {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    .animate-ticker { animation: ticker 10s linear infinite; }
    .animate-ticker:hover { animation-play-state: paused; }

    .card-body { transition: transform 0.3s ease-in-out; }

    .draggable-card {
      transition: top 0.3s ease, left 0.3s ease;
      position: absolute;
    }
  </style>

  <script src="https://unpkg.com/vue@3"></script>
  <script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>

  <script>
    (function () {
      if (!("serviceWorker" in navigator)) return;
      navigator.serviceWorker.register("/service-worker.js")
        .then((reg) => {
          console.log("âœ… Service worker registered", reg.scope);
          reg.update().catch(() => {});
        })
        .catch((err) => console.log("Service worker error:", err));
    })();
  </script>

  {% include scripts.html %}
</head>

<body>
  {% assign showDonation = false %}
  {% assign showKeyboardModal = false %}
  {% assign showMiddleBadge = false %}
  {% include header.liquid %}

  <main v-cloak id="main-content" class="mx-auto max-w-7xl mb-12 p-6">
    <!-- Clean header (no logo) -->
    <header class="max-w-md mx-auto mb-8 text-center">
      <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">Daily Trivia</h1>
      <p class="mt-2 text-base opacity-80">10 quick questions a day. No account needed.</p>
    </header>

    <div v-if="isLoading" class="max-w-md mx-auto skeleton h-full" aria-busy="true" aria-live="polite"></div>

    <div
      v-else
      class="card max-w-md mx-auto bg-base-100/80 backdrop-blur border border-base-300 shadow-md rounded-2xl p-8"
    >
      <!-- QUESTION -->
      {% raw %}
      <h2
        v-if="!quizFinished"
        class="text-2xl sm:text-3xl font-extrabold leading-tight mb-3 text-center"
        aria-live="polite"
      >
        {{ currentQuestion?.question }}
      </h2>
      {% endraw %}

      <!-- Progress -->
      <div v-if="!quizFinished" class="w-full mb-8">
        <progress class="progress progress-primary w-full" :value="currentCardIndex" :max="cards.length - 1"></progress>
        <div class="mt-2 text-xs opacity-70 text-center">
          {% raw %}Question {{ currentCardIndex + 1 }}/{{ cards.length }}{% endraw %}
        </div>
      </div>

      <!-- OPTIONS -->
      <div v-if="!quizFinished" class="grid grid-cols-1 gap-3 mb-6">
        <button
          v-for="(opt, idx) in (currentQuestion?.options || [])"
          :key="idx"
          type="button"
          @click="selectOption(idx)"
          class="btn btn-lg btn-block font-semibold lowercase first-letter:uppercase"
          :class="optionClass(idx)"
          :disabled="answers[currentCardIndex] !== undefined"
        >
          {% raw %}{{ opt }}{% endraw %}
        </button>
      </div>

      <!-- NAVIGATION -->
      <div v-if="!quizFinished" class="flex justify-between items-center">
        <button
          type="button"
          @click="prevQuestion"
          class="btn btn-circle btn-soft btn-info"
          :disabled="currentCardIndex === 0"
          aria-label="Previous question"
        >
          â—€
        </button>

        <span class="text-sm opacity-70">Answer to continue</span>

        <button
          type="button"
          @click="nextQuestion"
          class="btn btn-circle btn-soft btn-info"
          :disabled="answers[currentCardIndex] === undefined"
          aria-label="Next question"
        >
          â–¶
        </button>
      </div>

      <!-- SUMMARY -->
      <div v-if="quizFinished" class="w-full max-w-md mx-auto space-y-6" aria-live="polite">
        <h2 class="text-3xl font-extrabold text-center">Quiz Complete!</h2>
        <p class="text-center text-lg opacity-80">Come back tomorrow for 10 more questions</p>

        <div class="divider my-4"></div>

        <div class="flex justify-center items-center gap-3 flex-wrap">
          <span class="inline-flex items-center gap-2 px-4 py-2 bg-success text-primary-content rounded-full font-semibold">
            <span class="text-2xl">ðŸŸ¢</span>
            {% raw %}
            <span>Correct: <strong>{{ correctCount }}/{{ cards.length }}</strong></span>
            {% endraw %}
          </span>

          <span class="inline-flex items-center gap-2 px-4 py-2 bg-info text-primary-content rounded-full font-semibold">
            <span class="text-2xl">ðŸ”´</span>
            {% raw %}
            <span>Wrong: <strong>{{ cards.length - correctCount }}</strong></span>
            {% endraw %}
          </span>
        </div>

        <div class="flex justify-center items-center gap-3 flex-wrap">
          <span class="inline-block px-4 py-2 bg-primary text-primary-content rounded-full font-semibold">
            {% raw %}ðŸ“ˆ Accuracy: {{ accuracy }}{% endraw %}
          </span>
          <span class="inline-block px-4 py-2 bg-primary text-primary-content rounded-full font-semibold">
            {% raw %}Score: {{ score }}{% endraw %}
          </span>
          <span class="inline-block px-4 py-2 bg-primary text-primary-content rounded-full font-semibold">
            {% raw %}Rank: {{ rank }}{% endraw %}
          </span>
        </div>

        <h3 class="text-2xl font-bold text-left mt-10">Results Breakdown</h3>
        <div class="divider my-4"></div>

        <div class="flex justify-center gap-4 mt-4 flex-wrap">
          <div v-for="r in results" :key="r.index" class="flex flex-col items-center">
            <span class="text-2xl" :class="r.correct ? 'text-success' : 'text-error'" v-text="r.correct ? 'ðŸŸ¢' : 'ðŸ”´'"></span>
            <span class="text-sm mt-1 opacity-80" v-text="r.index"></span>
          </div>
        </div>

        <button type="button" @click="copyShareText" class="btn btn-block btn-primary btn-lg font-extrabold">
          SHARE YOUR SCORE
        </button>
      </div>
    </div>
  </main>

  {% include footer.liquid %}

  <script>
    var app = Vue.createApp({
      data() {
        return {
          optionColors: ["primary", "secondary", "success", "info"],
          isLoading: true,
          allQuestions: [],
          dailyQuestions: [],
          cards: [],
          currentCardIndex: 0,
          answers: [],
          startTime: null,
          endTime: null,
          quizFinished: false,
          bonusConfig: {
            fast: { time: 60, bonus: 5 },
            medium: { time: 120, bonus: 2 },
          },
        };
      },

      computed: {
        currentQuestion() {
          return this.cards[this.currentCardIndex] || null;
        },

        correctCount() {
          return this.answers.filter((sel, i) => {
            const card = this.cards[i];
            if (!card || sel == null) return false;
            return card.options?.[sel] === card.answer;
          }).length;
        },

        totalTime() {
          if (!this.endTime || !this.startTime) return 0;
          return Math.round((this.endTime - this.startTime) / 1000);
        },

        bonus() {
          if (!this.quizFinished) return 0;
          if (this.totalTime <= this.bonusConfig.fast.time) return this.bonusConfig.fast.bonus;
          if (this.totalTime <= this.bonusConfig.medium.time) return this.bonusConfig.medium.bonus;
          return 0;
        },

        score() {
          const basePoints = this.correctCount * 10;
          const timePenalty = Math.round(this.totalTime);
          return Math.max(0, basePoints - timePenalty + this.bonus);
        },

        accuracy() {
          if (!this.cards.length) return "â€”";
          return `${Math.round((this.correctCount / this.cards.length) * 100)}%`;
        },

        rank() {
          if (this.score >= 80) return "ðŸ† Legend";
          if (this.score >= 50) return "ðŸ”¥ Hotshot";
          if (this.score >= 20) return "ðŸ‘ Good";
          return "ðŸ˜‚ Awful";
        },

        results() {
          return this.answers.map((sel, i) => {
            const card = this.cards[i];
            const correct = !!card && card.options?.[sel] === card.answer;
            return { correct, index: i + 1 };
          });
        },

        today() {
          return new Date().toLocaleDateString("en-US", { month: "short", day: "numeric" });
        },

        shareText() {
          return [
            `âœï¸ 10 Daily Trivia â€“ ${this.today}`,
            `Accuracy: ${this.accuracy}`,
            `Correct: ${this.correctCount}/${this.cards.length}`,
            `Score: ${this.score}`,
            this.rank,
          ].join("\n");
        },
      },

      mounted() {
        this.initQuiz();
      },

      methods: {
        optionClass(idx) {
          const answered = this.answers[this.currentCardIndex] !== undefined;
          if (!answered) return `btn-${this.optionColors[idx] || "primary"}`;

          const correctIdx = this.currentQuestion
            ? this.currentQuestion.options.indexOf(this.currentQuestion.answer)
            : -1;

          if (idx === correctIdx) return "btn-success";
          if (idx === this.answers[this.currentCardIndex]) return "btn-error";
          return "opacity-50 cursor-not-allowed";
        },

        copyShareText() {
          const text = this.shareText;

          if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text)
              .then(() => alert("Copied to clipboard!"))
              .catch(() => this.fallbackCopy(text));
          } else {
            this.fallbackCopy(text);
          }
        },

        fallbackCopy(text) {
          const ta = document.createElement("textarea");
          ta.value = text;
          ta.setAttribute("readonly", "");
          ta.style.position = "absolute";
          ta.style.left = "-9999px";
          document.body.appendChild(ta);
          ta.select();
          try {
            document.execCommand("copy");
            alert("Copied to clipboard!");
          } catch (e) {
            alert("Could not copy automatically â€” please copy manually.");
          } finally {
            document.body.removeChild(ta);
          }
        },

        safeJsonParse(value, fallback) {
          try { return JSON.parse(value); } catch { return fallback; }
        },

        initQuiz() {
          fetch("/assets/js/trivia_options.json")
            .then((r) => {
              if (!r.ok) throw new Error(`Failed to load trivia JSON (${r.status})`);
              return r.json();
            })
            .then((data) => {
              this.allQuestions = Array.isArray(data?.questions) ? data.questions : [];
              console.log(`Loaded ${this.allQuestions.length} questions`);
              this.setupDaily();
              this.loadState();
            })
            .catch((err) => {
              console.error(err);
              this.isLoading = false;
            });
        },

        setupDaily() {
          const today = new Date().toLocaleDateString("en-CA"); // YYYY-MM-DD
          const prev = localStorage.getItem("dailyDate");

          if (prev !== today) {
            ["dailyDate", "dailyQuestions", "quizState"].forEach((k) => localStorage.removeItem(k));
            localStorage.setItem("dailyDate", today);
          }

          let dq = this.safeJsonParse(localStorage.getItem("dailyQuestions"), null);
          if (!Array.isArray(dq) || dq.length === 0) {
            dq = this.pickDailyQuestions(10);
            localStorage.setItem("dailyQuestions", JSON.stringify(dq));
          }
          this.dailyQuestions = dq;
        },

        pickDailyQuestions(count) {
          const dateNum = parseInt(new Date().toISOString().slice(0, 10).replace(/-/g, ""), 10);

          return this.allQuestions
            .map((q, i) => {
              const seed = i + dateNum;
              const rnd = Math.sin(seed) * 10000;
              return { q, key: rnd - Math.floor(rnd) };
            })
            .sort((a, b) => a.key - b.key)
            .slice(0, count)
            .map((obj) => ({
              ...obj.q,
              options: this.shuffle(obj.q.options),
            }));
        },

        shuffle(arr) {
          const a = Array.isArray(arr) ? arr.slice() : [];
          for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
          }
          return a;
        },

        loadState() {
          const today = localStorage.getItem("dailyDate");
          const st = this.safeJsonParse(localStorage.getItem("quizState"), null);

          this.cards = this.dailyQuestions;

          if (st && st.date === today) {
            this.currentCardIndex = Number.isFinite(st.currentCardIndex) ? st.currentCardIndex : 0;
            this.answers = Array.isArray(st.answers) ? st.answers : [];
            this.startTime = typeof st.startTime === "number" ? st.startTime : Date.now();

            if (st.finished) {
              this.endTime = typeof st.endTime === "number" ? st.endTime : Date.now();
              this.quizFinished = true;
            } else {
              this.quizFinished = false;
              this.endTime = null;
            }
          } else {
            this.currentCardIndex = 0;
            this.answers = [];
            this.startTime = Date.now();
            this.endTime = null;
            this.quizFinished = false;
            this.saveState();
          }

          this.isLoading = false;
        },

        saveState() {
          const st = {
            date: localStorage.getItem("dailyDate"),
            currentCardIndex: this.currentCardIndex,
            answers: this.answers,
            startTime: this.startTime,
            endTime: this.endTime,
            finished: this.quizFinished,
          };
          localStorage.setItem("quizState", JSON.stringify(st));
        },

        selectOption(idx) {
          if (this.quizFinished) return;
          if (this.answers[this.currentCardIndex] != null) return;

          this.answers[this.currentCardIndex] = idx;
          this.saveState();

          setTimeout(() => this.nextQuestion(), 600);
        },

        nextQuestion() {
          if (this.currentCardIndex < this.cards.length - 1) {
            this.currentCardIndex++;
          } else {
            this.finishQuiz();
          }
          this.saveState();
        },

        prevQuestion() {
          if (this.currentCardIndex > 0) {
            this.currentCardIndex--;
            this.saveState();
          }
        },

        finishQuiz() {
          this.endTime = Date.now();
          this.quizFinished = true;
          this.saveState();
        },
      },
    }).mount("#main-content");
  </script>

  {% include modals.liquid %}
</body>
</html>
